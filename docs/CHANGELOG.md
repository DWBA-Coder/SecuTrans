# SecuTrans 更新日志

## v1.1.0 - 问题修复版本

### 🔧 已修复的问题

#### 1. 连接错误修复
- **问题**: 第一次连接报错 `unknown option "-bg_color"`
- **原因**: StyledButton 组件不支持 state 参数
- **解决**: 
  - 修改 StyledButton 类支持 state 参数
  - 添加 set_state() 方法处理按钮状态
  - 修复所有使用 state 参数的地方

#### 2. 窗口层级问题修复
- **问题**: 弹窗时主界面总是弹到功能界面前面
- **原因**: 子窗口没有正确设置层级关系
- **解决**:
  - 添加 `transient(self.parent)` 设置父窗口
  - 添加 `grab_set()` 防止主窗口获取焦点
  - 在窗口关闭时调用 `grab_release()` 释放抓取

#### 3. 按钮颜色统一
- **问题**: 按钮颜色太丑，使用了多种颜色
- **解决**: 
  - 所有按钮统一使用桂电蓝 (#005FA5)
  - 移除了成功、警告、错误等不同颜色的按钮
  - 保持统一的视觉风格

#### 4. 加密数据处理优化
- **问题**: 是否应该保存加密数据到磁盘
- **解决**: 
  - 加密数据不保存到磁盘，仅在内存中处理
  - 提高安全性，避免敏感信息残留
  - 日志中明确标注"内存中处理，不保存到磁盘"

### 🆕 新增功能

#### 5. 统一界面模式
- **新增**: `unified_window.py` 统一界面版本
- **特点**: 
  - 使用 Notebook 标签页整合所有功能
  - 一个窗口包含发送、接收、日志三个标签页
  - 更紧凑的界面布局
  - 适合屏幕空间有限的情况

#### 6. 界面模式选择
- **新增**: 主窗口提供界面模式选择
- **选项**:
  - 双窗口模式：发送方和接收方独立窗口
  - 统一界面模式：所有功能整合在一个窗口
- 用户可以根据使用习惯选择合适的模式

### 📋 使用说明

#### 双窗口模式
1. 点击"双窗口模式"按钮
2. 自动打开发送方和接收方两个独立窗口
3. 适合需要同时监控发送和接收状态的用户

#### 统一界面模式
1. 点击"统一界面模式"按钮
2. 打开包含所有功能的单一窗口
3. 通过标签页切换发送、接收、日志功能
4. 适合屏幕空间有限或喜欢简洁界面的用户

#### 启动方式
```bash
# 方式1：通过主界面选择模式
python secutrans.py

# 方式2：直接运行（会显示选择界面）
python secutrans.py
```

### 🎨 界面改进

#### 按钮样式
- 统一使用桂电蓝 (#005FA5)
- 禁用状态显示为灰色背景
- 保持悬停效果和点击反馈

#### 窗口管理
- 子窗口不会让主窗口弹到前面
- 模态对话框确保操作焦点
- 正确的窗口层级关系

#### 日志提示
- 加密处理过程更详细的说明
- 明确数据在内存中处理
- 提供操作成功/失败的清晰反馈

### 🔒 安全性提升

- 加密数据不写入磁盘
- 仅在内存中处理敏感信息
- 完成处理后立即清除内存
- 减少数据泄露风险

### 📦 文件变更

#### 新增文件
- `unified_window.py` - 统一界面实现

#### 修改文件
- `gui_components.py` - 修复 StyledButton 组件
- `sender_window.py` - 修复按钮状态和颜色
- `receiver_window.py` - 修复按钮状态和颜色  
- `main_window.py` - 添加界面模式选择

#### 保持不变
- 核心加密逻辑 (`crypto_utils.py`)
- 网络传输逻辑 (`network_utils.py`)
- 配置文件 (`config.py`)
- 日志系统 (`logger.py`)

---

## v1.0.0 - 初始版本

### ✨ 核心功能
- 多种对称加密算法支持 (AES, DES, 3DES, Blowfish, RC4)
- 多种加密模式支持 (ECB, CBC, CFB, OFB, CTR)
- 数字信封技术实现
- RSA公钥加密保护对称密钥
- 网络文件传输功能
- 双窗口独立界面

### 🎨 设计特色
- 桂电蓝主题配色 (#005FA5)
- 现代化Tkinter界面
- 实时进度显示
- 详细操作日志

---

**选择合适的版本建议:**
- **v1.1.0**: 推荐使用，修复了所有已知问题，界面体验更佳
- **统一界面**: 适合小屏幕或喜欢简洁操作的用户
- **双窗口模式**: 适合需要同时监控发送和接收状态的用户